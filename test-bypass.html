<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VideoiX Bypass Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background: #1a1a1a;
            color: white;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        .test-section {
            margin: 20px 0;
            padding: 20px;
            background: #2a2a2a;
            border-radius: 8px;
        }
        iframe {
            width: 100%;
            height: 400px;
            border: 1px solid #444;
            border-radius: 4px;
        }
        .test-title {
            color: #4CAF50;
            margin-bottom: 10px;
        }
        .status {
            margin: 10px 0;
            padding: 10px;
            border-radius: 4px;
        }
        .success { background: #2d5a2d; color: #90EE90; }
        .error { background: #5a2d2d; color: #FFB6C1; }
        .loading { background: #3d3d2d; color: #FFEB3B; }
        button {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background: #45a049;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üé¨ VideoiX Enhanced Bypass Test</h1>
        <p>Testing the new enhanced bypass methods for Dailymotion and other restricted platforms.</p>

        <!-- Test 1: Standard Dailymotion Embed -->
        <div class="test-section">
            <h3 class="test-title">Test 1: Standard Dailymotion Embed</h3>
            <div id="status1" class="status loading">‚è≥ Ready to test...</div>
            <button onclick="testStandardDailymotion()">Test Standard Embed</button>
            <div id="iframe1-container"></div>
        </div>

        <!-- Test 2: Enhanced Stealth URLs -->
        <div class="test-section">
            <h3 class="test-title">Test 2: Enhanced Stealth URLs</h3>
            <div id="status2" class="status loading">‚è≥ Ready to test...</div>
            <button onclick="testStealthUrls()">Test Stealth URLs</button>
            <div id="iframe2-container"></div>
        </div>

        <!-- Test 3: Proxy with Standard Mode -->
        <div class="test-section">
            <h3 class="test-title">Test 3: Proxy with Standard Anti-Detection</h3>
            <div id="status3" class="status loading">‚è≥ Ready to test...</div>
            <button onclick="testProxyStandard()">Test Proxy Standard</button>
            <div id="iframe3-container"></div>
        </div>

        <!-- Test 4: Proxy with Advanced Mode -->
        <div class="test-section">
            <h3 class="test-title">Test 4: Proxy with Advanced Anti-Detection</h3>
            <div id="status4" class="status loading">‚è≥ Ready to test...</div>
            <button onclick="testProxyAdvanced()">Test Proxy Advanced</button>
            <div id="iframe4-container"></div>
        </div>

        <!-- Test 5: Mobile Bypass -->
        <div class="test-section">
            <h3 class="test-title">Test 5: Mobile Version Bypass</h3>
            <div id="status5" class="status loading">‚è≥ Ready to test...</div>
            <button onclick="testMobileBypass()">Test Mobile Bypass</button>
            <div id="iframe5-container"></div>
        </div>

        <!-- Test 6: CDN Bypass -->
        <div class="test-section">
            <h3 class="test-title">Test 6: CDN/Geo Bypass</h3>
            <div id="status6" class="status loading">‚è≥ Ready to test...</div>
            <button onclick="testCdnBypass()">Test CDN Bypass</button>
            <div id="iframe6-container"></div>
        </div>
    </div>

    <script>
        // Test video ID (Dailymotion)
        const testVideoId = 'x9mrim4'; // A public test video

        function updateStatus(testNumber, message, type = 'loading') {
            const status = document.getElementById(`status${testNumber}`);
            status.textContent = message;
            status.className = `status ${type}`;
        }

        function createIframe(container, src, testNumber) {
            container.innerHTML = '';
            const iframe = document.createElement('iframe');
            iframe.src = src;
            iframe.allow = 'autoplay; fullscreen';
            iframe.allowFullscreen = true;
            
            const startTime = Date.now();
            
            iframe.onload = () => {
                const loadTime = Date.now() - startTime;
                updateStatus(testNumber, `‚úÖ Loaded successfully in ${loadTime}ms`, 'success');
                
                // Check if iframe has content after a delay
                setTimeout(() => {
                    try {
                        const doc = iframe.contentDocument || iframe.contentWindow?.document;
                        if (doc && doc.body && doc.body.children.length === 0) {
                            updateStatus(testNumber, `‚ö†Ô∏è Loaded but appears empty - may be blocked`, 'error');
                        }
                    } catch (e) {
                        // Cross-origin restriction - assume success
                        updateStatus(testNumber, `‚úÖ Loaded (cross-origin protected) in ${loadTime}ms`, 'success');
                    }
                }, 3000);
            };
            
            iframe.onerror = () => {
                const loadTime = Date.now() - startTime;
                updateStatus(testNumber, `‚ùå Failed to load after ${loadTime}ms`, 'error');
            };
            
            container.appendChild(iframe);
            updateStatus(testNumber, '‚è≥ Loading iframe...', 'loading');
        }

        function testStandardDailymotion() {
            const container = document.getElementById('iframe1-container');
            const url = `https://www.dailymotion.com/embed/video/${testVideoId}?autoplay=false&mute=false`;
            createIframe(container, url, 1);
        }

        function testStealthUrls() {
            const container = document.getElementById('iframe2-container');
            const url = `https://www.dailymotion.com/embed/video/${testVideoId}?syndication=lr:175862&api=postMessage&chromeless=1&info=0&logo=0&related=0`;
            createIframe(container, url, 2);
        }

        function testProxyStandard() {
            const container = document.getElementById('iframe3-container');
            const targetUrl = `https://www.dailymotion.com/embed/video/${testVideoId}`;
            const url = `/api/proxy?url=${encodeURIComponent(targetUrl)}&bypass=standard`;
            createIframe(container, url, 3);
        }

        function testProxyAdvanced() {
            const container = document.getElementById('iframe4-container');
            const targetUrl = `https://www.dailymotion.com/embed/video/${testVideoId}`;
            const url = `/api/proxy?url=${encodeURIComponent(targetUrl)}&bypass=advanced`;
            createIframe(container, url, 4);
        }

        function testMobileBypass() {
            const container = document.getElementById('iframe5-container');
            const url = `https://touch.dailymotion.com/embed/video/${testVideoId}?autoplay=false&info=false`;
            createIframe(container, url, 5);
        }

        function testCdnBypass() {
            const container = document.getElementById('iframe6-container');
            const url = `https://geo.dailymotion.com/player.html?video=${testVideoId}&autoplay=false&mute=false`;
            createIframe(container, url, 6);
        }

        // Add global error handler
        window.addEventListener('error', (e) => {
            console.error('Global error:', e.error);
        });

        console.log('üöÄ VideoiX Bypass Test Tool Ready');
        console.log('üìã Test video ID:', testVideoId);
        console.log('üîß Use the buttons above to test different bypass methods');
    </script>
</body>
</html>
